<div class="product-detail-container">
    <div class="product-detail">
        <div class="product-header">
            <h1><%= @product.name %></h1>
        </div>

        <div class="product-content">
            <div class="product-image">
                <% if @product.image.attached? %>
                <%= image_tag @product.image, alt: @product.name %>
                <% else %>
                <%= image_tag 'placeholder.jpg', alt: 'No image available' %>
                <% end %>
            </div>

            <div class="product-info">
                <div class="product-price">
                    <h2>$<%= number_with_precision(@product.price, precision: 2) %></h2>
                </div>

                <div class="product-description">
                    <h3>Description</h3>
                    <p><%= @product.description %></p>
                </div>

                <% if @product.category %>
                <div class="product-category">
                    <strong>Category:</strong>
                    <%= link_to @product.category, products_path(category: @product.category) %>
                </div>
                <% end %>

                <div class="product-actions">
                    <% if session[:cart]&.key?(@product.id.to_s) %>
                    <%= button_to "Remove from Cart", remove_cart_path(@product.id), 
                                method: :delete, 
                                class: "button is-danger is-small" %>
                    <% else %>
                    <%= button_to "Add to Cart", add_cart_path(@product.id), 
                                method: :post, 
                                class: "button is-primary is-small" %>
                    <% end %>
                    <%= link_to "Back to Products", products_path, class: "btn btn-secondary" %>
                </div>
            </div>
        </div>
    </div>
</div>